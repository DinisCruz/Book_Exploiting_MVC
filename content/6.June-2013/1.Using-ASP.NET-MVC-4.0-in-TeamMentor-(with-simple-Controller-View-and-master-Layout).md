##  Using ASP.NET MVC 4.0 in TeamMentor (with simple Controller, View and master Layout)

On _TeamMentor's _3.3. release we added support for C# **_RazorEngine_** and **System.Web.Razor.**

For 3.4 release, there is requirement to add Markdown support (see next post). Since the API that I want to use ([MarkdownDeep](http://www.toptensoftware.com/markdowndeep/)) works really well with **_ASP.NET MVC 4.0_**, here is how I added **_ASP.NET MVC 4.0_** support to TeamMentor.

The process was quite smooth, and I was able to quickly get it up and running.

It all started with NuGet where I added this package

[![image](images/image_thumb.png)](http://lh5.ggpht.com/-zB0kbphGgzw/Ua6P6HC2GiI/AAAAAAAAMiE/ca5CBxKNB2E/s1600-h/image%25255B2%25255D.png)

Which (after Resharper optimization) results in two MVC dependencies (**_System.Web.MVC_** and **_System.Web.WebPages_**)

[![image](images/image_thumb_25255B2_25255D.png)](http://lh3.ggpht.com/-A7i8HlKGk0I/Ua6P7cTjnyI/AAAAAAAAMiU/56tdpTQV7bk/s1600-h/image%25255B6%25255D.png)

_UPDATE: Azure required a couple more MVC dependencies_  
_  
_Since one of my objectives in adding this library is to not touch the **_TeamMentor.CoreLib_** assembly (which is where the global.asax.cs file is), I used the [Asp.Net App_Code AppInitialize non-documented featured (invoked before Application_Start)](https://www.blogger.com/blog.diniscruz.com/2013/01/aspnet-appcode-appinitialize-non.html) technique to register the main Routes on an file called **_MCV_Config.cs_** added to the **_App_Code_** folder:

[![image](images/image_thumb_25255B4_25255D.png)](http://lh3.ggpht.com/-m8IEl39JE38/Ua6P8ah7RVI/AAAAAAAAMik/weIUYXXPXVM/s1600-h/image%25255B12%25255D.png)

I then added a **_MvcTestController.cs_** file with a controller class with two methods

[![image](images/image_thumb_25255B7_25255D.png)](http://lh3.ggpht.com/-JVbWJfwJFtQ/Ua6P95chE9I/AAAAAAAAMi0/ZeCqwuwee08/s1600-h/image%25255B21%25255D.png)

... and a view called _**Index.cshtml **_(located in the **_/Mvc/Views/*_** folder instead of the default _**/Views/MvcTest/***_ folder)

[![image](images/image_thumb_25255B8_25255D.png)](http://lh5.ggpht.com/-sWKXtoLamCk/Ua6P_YRt7ZI/AAAAAAAAMjE/7CXewIO9CO8/s1600-h/image%25255B24%25255D.png)

... and a master view called **__layout.cshtml_** (referenced from the **_Index.cshtml_** razor file shown above)

[![image](images/image_thumb_25255B9_25255D.png)](http://lh5.ggpht.com/-DgxWZk27edg/Ua6QAXPBfTI/AAAAAAAAMjU/bzeDwnQ-lSY/s1600-h/image%25255B27%25255D.png)

... and that is it :)

The **__layout.cshtml_** file is basically the **_AngularJS_** main page used by _**_TBot,_** _with all the **_ASP.NET MVC _**interaction happening with the **_@RenderBody_** command (shown above)

After compiling the project, here is what the [http://localhost:3187/MvcTest](http://localhost:3187/MvcTest) looks like ([in Chrome inside VisualStudio](http://blog.diniscruz.com/2013/03/using-chrome-inside-native-visualstudio.html))

[![image](images/image_thumb_25255B11_25255D.png)](http://lh5.ggpht.com/-hLMN5e8Ky3s/Ua6QB3CfGkI/AAAAAAAAMjk/gPnjlLflfNw/s1600-h/image%25255B33%25255D.png)

We can also access the same page on [http://localhost:3187/MvcTest/FirstAction](http://localhost:3187/MvcTest/FirstAction)

[![image](images/image_thumb_25255B12_25255D.png)](http://lh6.ggpht.com/-EVzNkZxGNJc/Ua6QDCGjy7I/AAAAAAAAMj0/wjqbCIr9sKg/s1600-h/image%25255B36%25255D.png)

And open the other controller method at  [http://localhost:3187/MvcTest/SecondAction](http://localhost:3187/MvcTest/SecondAction)

[![image](images/image_thumb_25255B13_25255D.png)](http://lh4.ggpht.com/-Ec4dQTAqeMg/Ua6QEXbUoqI/AAAAAAAAMkE/A1tr5hMEuQA/s1600-h/image%25255B39%25255D.png)
